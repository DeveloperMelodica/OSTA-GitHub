require "zlib"
text = <<-EOS
require "zlib"
list_path = File.join("Ruby-files", "_scripts.txt")
iseqs = []
IO.foreach(list_path) do |name|
  name.strip!
  next if name.empty? || name.start_with?("#")
  puts "Compiling \#{name}"
  iseq = RubyVM::InstructionSequence.compile_file("Ruby-files/" + name + ".rb").to_binary
  iseqs << Zlib.deflate(iseq)
end
two = <<~TWO
\e[48;5;232m                                     \e[38;5;233;48;5;232m▄\e[38;5;52;48;5;232m▄▄\e[38;5;232;48;5;232m▄\e[48;5;232m       \e[m
\e[48;5;232m         \e[38;5;124;48;5;232m▄\e[38;5;1;48;5;232m▄▄▄\e[38;5;124;48;5;232m▄\e[38;5;233;48;5;232m▄\e[38;5;232;48;5;232m▄\e[48;5;232m                \e[38;5;233;48;5;232m▄\e[38;5;1;48;5;232m▄\e[38;5;124;48;5;52m▄\e[38;5;52;48;5;1m▄\e[38;5;233;48;5;1m▄\e[38;5;233;48;5;124m▄\e[38;5;232;48;5;1m▄\e[38;5;233;48;5;88m▄\e[38;5;1;48;5;1m▄\e[38;5;232;48;5;232m▄\e[48;5;232m      \e[m
\e[48;5;232m       \e[38;5;232;48;5;232m▄\e[38;5;124;48;5;52m▄\e[38;5;52;48;5;160m▄\e[48;5;232m   \e[38;5;232;48;5;88m▄\e[38;5;232;48;5;124m▄\e[38;5;52;48;5;1m▄\e[38;5;52;48;5;52m▄\e[38;5;88;48;5;232m▄▄\e[38;5;232;48;5;232m▄▄▄▄\e[38;5;52;48;5;232m▄\e[38;5;88;48;5;232m▄\e[38;5;1;48;5;232m▄▄▄▄▄\e[38;5;88;48;5;232m▄\e[38;5;1;48;5;52m▄\e[38;5;52;48;5;124m▄\e[38;5;232;48;5;232m▄\e[48;5;232m     \e[38;5;232;48;5;232m▄\e[38;5;52;48;5;124m▄\e[48;5;52m \e[48;5;232m      \e[m
\e[48;5;232m       \e[38;5;52;48;5;52m▄\e[38;5;52;48;5;124m▄\e[48;5;232m       \e[38;5;232;48;5;232m▄▄\e[38;5;232;48;5;124m▄\e[38;5;52;48;5;124m▄\e[38;5;232;48;5;124m▄▄▄▄\e[38;5;232;48;5;233m▄\e[38;5;232;48;5;232m▄▄▄▄▄▄▄\e[48;5;232m        \e[48;5;52m  \e[48;5;232m      \e[m
\e[48;5;232m       \e[48;5;52m  \e[48;5;232m                               \e[48;5;52m  \e[48;5;232m      \e[m
\e[48;5;232m       \e[48;5;52m \e[38;5;52;48;5;52m▄\e[48;5;232m                              \e[38;5;233;48;5;232m▄\e[38;5;124;48;5;1m▄\e[38;5;233;48;5;52m▄\e[48;5;232m      \e[m
\e[48;5;232m       \e[38;5;232;48;5;233m▄\e[38;5;124;48;5;124m▄\e[48;5;232m                              \e[38;5;124;48;5;233m▄\e[38;5;88;48;5;52m▄\e[38;5;232;48;5;232m▄\e[48;5;232m      \e[m
\e[48;5;232m  \e[38;5;233;48;5;232m▄\e[38;5;160;48;5;232m▄▄▄▄\e[38;5;88;48;5;233m▄\e[38;5;232;48;5;160m▄\e[48;5;232m                              \e[38;5;232;48;5;52m▄\e[38;5;232;48;5;124m▄\e[38;5;88;48;5;233m▄\e[38;5;160;48;5;232m▄▄\e[38;5;52;48;5;232m▄\e[38;5;232;48;5;232m▄\e[48;5;232m  \e[m
\e[48;5;232m \e[38;5;124;48;5;52m▄\e[38;5;232;48;5;160m▄\e[38;5;232;48;5;233m▄\e[48;5;232m                                       \e[38;5;232;48;5;52m▄\e[38;5;232;48;5;124m▄\e[38;5;1;48;5;1m▄\e[38;5;124;48;5;233m▄\e[38;5;232;48;5;232m▄\e[m
\e[48;5;232m \e[48;5;124m \e[38;5;124;48;5;232m▄\e[48;5;232m          \e[38;5;142;48;5;232m▄\e[38;5;220;48;5;58m▄▄▄▄▄\e[38;5;58;48;5;232m▄\e[48;5;232m        \e[38;5;58;48;5;232m▄\e[38;5;220;48;5;58m▄▄▄▄▄\e[38;5;178;48;5;234m▄\e[38;5;234;48;5;232m▄\e[48;5;232m         \e[38;5;52;48;5;232m▄\e[38;5;124;48;5;1m▄\e[48;5;232m \e[m
\e[48;5;232m  \e[38;5;232;48;5;124m▄\e[38;5;232;48;5;160m▄\e[38;5;52;48;5;52m▄\e[38;5;160;48;5;233m▄\e[38;5;124;48;5;232m▄\e[38;5;1;48;5;232m▄\e[48;5;232m     \e[38;5;232;48;5;136m▄\e[38;5;3;48;5;220m▄\e[48;5;220m   \e[48;5;234m \e[48;5;220m \e[38;5;220;48;5;58m▄\e[48;5;232m      \e[38;5;184;48;5;58m▄\e[38;5;220;48;5;220m▄\e[48;5;236m \e[48;5;184m \e[48;5;220m  \e[38;5;136;48;5;220m▄\e[38;5;233;48;5;142m▄\e[38;5;232;48;5;233m▄\e[48;5;232m     \e[38;5;1;48;5;232m▄\e[38;5;124;48;5;232m▄▄▄\e[38;5;124;48;5;88m▄\e[38;5;232;48;5;52m▄\e[48;5;232m \e[m
\e[48;5;232m       \e[38;5;232;48;5;160m▄▄\e[48;5;160m \e[48;5;232m    \e[38;5;232;48;5;58m▄\e[38;5;58;48;5;220m▄\e[48;5;220m  \e[38;5;220;48;5;238m▄\e[48;5;220m  \e[48;5;100m \e[48;5;232m    \e[48;5;100m \e[48;5;220m  \e[38;5;220;48;5;58m▄\e[38;5;220;48;5;184m▄\e[48;5;220m \e[38;5;58;48;5;220m▄\e[38;5;232;48;5;58m▄\e[48;5;232m    \e[38;5;88;48;5;232m▄\e[38;5;1;48;5;124m▄\e[38;5;232;48;5;160m▄\e[38;5;232;48;5;233m▄\e[48;5;232m      \e[m
\e[48;5;232m         \e[48;5;160m \e[48;5;232m                           \e[38;5;232;48;5;232m▄\e[38;5;124;48;5;88m▄\e[48;5;52m \e[48;5;232m        \e[m
\e[48;5;232m         \e[38;5;232;48;5;9m▄\e[38;5;52;48;5;52m▄\e[48;5;232m   \e[38;5;52;48;5;232m▄\e[38;5;88;48;5;232m▄\e[48;5;232m                \e[38;5;232;48;5;232m▄\e[38;5;160;48;5;1m▄\e[38;5;233;48;5;233m▄\e[48;5;232m  \e[38;5;1;48;5;52m▄\e[38;5;52;48;5;52m▄\e[38;5;232;48;5;232m▄\e[48;5;232m        \e[m
\e[48;5;232m         \e[38;5;232;48;5;232m▄\e[38;5;88;48;5;160m▄\e[38;5;52;48;5;232m▄\e[48;5;232m  \e[38;5;88;48;5;52m▄\e[38;5;124;48;5;9m▄\e[38;5;232;48;5;124m▄\e[48;5;232m               \e[38;5;232;48;5;124m▄\e[38;5;52;48;5;9m▄\e[38;5;160;48;5;233m▄\e[38;5;233;48;5;232m▄\e[38;5;124;48;5;232m▄\e[38;5;1;48;5;88m▄\e[38;5;232;48;5;232m▄\e[48;5;232m         \e[m
\e[48;5;232m          \e[38;5;232;48;5;232m▄\e[38;5;124;48;5;160m▄\e[38;5;124;48;5;232m▄\e[38;5;232;48;5;232m▄\e[38;5;124;48;5;124m▄\e[38;5;233;48;5;232m▄\e[48;5;232m                  \e[38;5;233;48;5;233m▄\e[38;5;1;48;5;124m▄\e[38;5;232;48;5;1m▄\e[38;5;232;48;5;232m▄\e[48;5;232m          \e[m
\e[48;5;232m           \e[38;5;232;48;5;232m▄\e[38;5;232;48;5;88m▄\e[38;5;160;48;5;124m▄\e[38;5;88;48;5;9m▄\e[38;5;232;48;5;9m▄\e[48;5;232m                  \e[38;5;232;48;5;124m▄\e[38;5;88;48;5;88m▄\e[38;5;232;48;5;232m▄\e[48;5;232m           \e[m
\e[48;5;232m            \e[38;5;1;48;5;52m▄\e[38;5;232;48;5;160m▄\e[48;5;232m                    \e[38;5;232;48;5;232m▄\e[38;5;232;48;5;88m▄\e[38;5;124;48;5;124m▄\e[38;5;233;48;5;232m▄\e[48;5;232m          \e[m
\e[48;5;232m            \e[38;5;232;48;5;233m▄\e[38;5;160;48;5;160m▄\e[38;5;160;48;5;232m▄\e[38;5;124;48;5;232m▄\e[48;5;232m                \e[38;5;232;48;5;232m▄\e[38;5;124;48;5;232m▄\e[38;5;160;48;5;232m▄\e[38;5;160;48;5;233m▄\e[38;5;52;48;5;160m▄\e[38;5;232;48;5;233m▄\e[48;5;232m          \e[m
\e[48;5;232m             \e[38;5;232;48;5;52m▄\e[38;5;232;48;5;1m▄\e[38;5;232;48;5;233m▄\e[48;5;232m                \e[38;5;232;48;5;232m▄\e[38;5;233;48;5;52m▄\e[38;5;52;48;5;88m▄\e[38;5;232;48;5;233m▄\e[38;5;232;48;5;232m▄\e[48;5;232m           \e[m
\e[48;5;232m              \e[38;5;232;48;5;232m▄▄\e[48;5;232m                 \e[38;5;232;48;5;232m▄▄\e[48;5;232m             \e[m
TWO
File.open("Data/xIseq.rxdata", "wb") do |f|
  Marshal.dump(two, f)
  Marshal.dump(iseqs, f)
end
EOS

scripts = []

script = Array.new(3)
script[0] = 0
script[1] = "Main"
script[2] = Zlib.deflate(text)
scripts << script

File.open("../Data/xScripts.rxdata", "wb") { |f| f.write(Marshal.dump(scripts)) }
puts "#{"../Data/xScripts.rxdata"} written."
